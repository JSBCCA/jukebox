songlist = [["Main Theme (Super Mario Bros.)", "mario_theme", "Super Mario Bros."],
            ["Underground Theme", "underground", "Super Mario Bros."],
            ["Underwater Theme", "underwater", "Super Mario Bros."],
            // super mario world
            ["Main Theme (Super Mario 64)", "mario_64", "Super Mario 64"],
            ["Ricco Harbor", "ricco_harbor", "Super Mario Sunshine"],
            ["Comet Observatory", "observ", "Super Mario Galaxy"],
            ["Gusty Garden Galaxy", "gusty", "Super Mario Galaxy"],
            ["World Bowser", "world_bowser", "Super Mario 3D World"],
            ["Jump Up Superstar!", "jump_superstar", "Super Mario Odyssey"],
            ["Break Free", "break_free", "Super Mario Odyssey"],
            ["Gloomy Manor", "gloomy", "Luigi\'s Mansion: Dark Moon"],
            ["Rainbow Road", "rainbow", "Mario Kart 64"],
            ["Tick Tock Clock Remix", "tick_tock", "Mario Kart 8"],
            ["Beware the Forest Mushrooms", "forest", "Super Mario RPG"],
            ["Come On!", "come_on", "Mario & Luigi: Superstar Saga"],
            ["Final Battle", "shroob", "Mario & Luigi: Partners in Time"],
            ["Grand Finale", "grand", "Mario & Luigi: Bowser\'s Inside Story"],
            ["Adventure\'s End", "end", "Mario & Luigi: Dream Team"],
            ["Final Boss Phase 2", "doublebowser", "Mario & Luigi: Paper Jam"],
            ["Rogueport", "rogueport", "Paper Mario: The Thousand Year Door"],
            ["Battle Theme", "ttydbattle", "Paper Mario: The Thousand Year Door"],
            ["Macho Grubba Battle", "grubba", "Paper Mario: The Thousand Year Door"],
            ["Sadness and Happiness", "sad_happy_ttyd", "Paper Mario: The Thousand Year Door"],
            ["Excess Express at Dusk", "at_dusk", "Paper Mario: The Thousand Year Door"],
            ["Excess Express at Night", "at_night", "Paper Mario: The Thousand Year Door"],
            ["X-Naut Fortress", "xnaut", "Paper Mario: The Thousand Year Door"],
            ["Flipside", "flipside", "Super Paper Mario"],
            ["Lineland Road", "lineland", "Super Paper Mario"],
            ["Merlee\'s Mansion", "merlee", "Super Paper Mario"],
            ["Sammer\'s Kingdom", "sammers", "Super Paper Mario"],
            ["Champion of Destruction", "champ_destruction", "Super Paper Mario"],
            ["Bounding Through Time", "bound_time", "Super Paper Mario"],
            ["The Ultimate Show", "spm_ultimate", "Super Paper Mario"],
            ["Proof of Existence", "proof_exist", "Super Paper Mario"],
            ["Big Top Bop", "big_top", "Donkey Kong Country: Tropical Freeze"],
            ["Main Theme (The Legend of Zelda)", "zelda_intro", "The Legend of Zelda"],
            ["The Dark World", "dark_world", "The Legend of Zelda: A Link to the Past"],
            ["Title Theme", "title", "The Legend of Zelda: Ocarina of Time"],
            ["Zelda\'s Lullaby", "lullaby", "The Legend of Zelda: Ocarina of Time"],
            ["Song of Storms", "storms", "The Legend of Zelda: Ocarina of Time"],
            ["Gerudo Valley", "gerudo", "The Legend of Zelda: Ocarina of Time"],
            ["Song of Healing", "healing", "The Legend of Zelda: Majora\'s Mask"],
            ["The Great Sea", "greatsea", "The Legend of Zelda: The Wind Waker"],
            ["Dragon Roost Island", "dragonroost", "The Legend of Zelda: The Wind Waker"],
            ["Hyrule Field", "hyrule_field", "The Legend of Zelda: Twilight Princess"],
            ["Midna\'s Lament", "midna_lament", "The Legend of Zelda: Twilight Princess"],
            ["Ballad of the Goddess", "ballad", "The Legend of Zelda: Skyward Sword"],
            ["Skyloft", "skyloft", "The Legend of Zelda: Skyward Sword"],
            ["Fi\'s Theme", "fi", "The Legend of Zelda: Skyward Sword"],
            ["Main Theme (Breath of the Wild)", "breath_wild", "The Legend of Zelda: Breath of the Wild"],
            ["Hyrule Castle (Outside w/ enemies)", "botw_castle", "The Legend of Zelda: Breath of the Wild"],
            ["The Divine Trial (Final Battle)", "botw_divine", "The Legend of Zelda: Breath of the Wild"],
            ["Brinstar", "brinstar", "Metroid"],
            ["Surface of SR388", "sr388", "Metroid: Samus Returns"],
            ["Brinstar Red Soil", "redsoil", "Metroid: Samus Returns"],
            ["VS Proteus Ridley", "proteus", "Metroid: Samus Returns"],
            ["Green Greens", "greens", "Kirby\'s Dream Land"],
            ["Rainbow Resort", "rainbow_resort", "Kirby\'s Adventure"],
            ["King Dedede\'s Theme", "king_dedede", "Kirby Super Star"],
            ["Meta Knight\'s Revenge", "meta_knight", "Kirby Super Star"],
            ["Miracle Matter", "mira_matt", "Kirby 64: The Crystal Shards"],
            ["Zero Two", "zerotwo", "Kirby 64: The Crystal Shards"],
            ["Cookie Country", "cookie_c", "Kirby\'s Return to Dreamland"],
            ["C-R-O-W-N-E-D", "crowned", "Kirby\'s Return to Dreamland"],
            ["Dirty & Beauty", "sectonia", "Kirby Triple Deluxe"],
            ["Moonstruck Blossom", "moonstruck", "Kirby Triple Deluxe"],
            ["VS Star Dream", "stardream", "Kirby Planet Robobot"],
            ["Virtual Space Manipulator", "star_dream_vsp", "Kirby Planet Robobot"],
            ["P-R-O-G-R-A-M", "program", "Kirby Planet Robobot"],
            ["Magnus\'s Theme", "magnus", "Kid Icarus Uprising"],
            ["Dark Pit\'s Theme", "dark_pit", "Kid Icarus Uprising"],
            ["Lightning Battle", "lightning", "Kid Icarus Uprising"],
            ["Id (Purpose)", "purpose", "Fire Emblem Awakening"],
            ["Lost in Thoughts All Alone", "lost_thoughts", "Fire Emblem Fates"],
            ["Thorn in You (Roar)", "thorn", "Fire Emblem Fates"],
            ["Perplexing Dreams", "perp_dream", "Fire Emblem Fates"],
            ["A Dark Fall", "dark_fall", "Fire Emblem Fates"],
            // animal crossing anything
            ["Splattack!", "splattack", "Splatoon"],
            ["Main Theme (Arms)", "arms", "Arms"],
            ["Lumiose City", "lumiose", "Pokemon X & Y"],
            ["Battle Champion", "champxy", "Pokemon X & Y"],
            ["Battle Lorekeeper Zinnia", "zinnia", "Pokemon Omega Ruby & Alpha Sapphire"],
            ["Ultra Necrozma", "necrozma", "Pokemon Ultra Sun & Ultra Moon"],
            ["Onett", "onett_eb", "Earthbound"],
            ["Snowman", "snowman_eb", "Earthbound"],
            ["Smiles and Tears", "smiles_tears", "Earthbound"],
            ["Midday Majesty", "midday", "Chibi-Robo!"],
            ["Drake Redcrest Theme", "drake_redcrest", "Chibi-Robo!"],
            ["UFO Visitation", "ufo_visit", "Chibi-Robo!"],
            ["Gaur Plains", "gaur", "Xenoblade Chronicles"],
            // Super Smash Bros. 64 metal cavern
            ["Fountain of Dreams", "fountain_dreams_ssbm", "Super Smash Bros. Melee"],
            ["Fire Emblem", "melee_fe", "Super Smash Bros. Melee"],
            ["Main Theme (Luigi\'s Mansion)", "luigis_mansion", "Super Smash Bros. Brawl"],
            ["Dr. Wily\'s Castle: Stage 1", "wily", "Mega Man 2"],
            ["Devils Never Cry", "devilsnevercry", "Devil May Cry 3"],
            ["Green Hill Zone", "green_hill", "Sonic the Hedgehog"],
            ["Emerald Hill Zone", "emerald", "Sonic the Hedgehog 2"],
            ["Chemical Plant Zone", "chemical", "Sonic the Hedgehog 2"],
            ["Casino Night Zone (1P)", "casino", "Sonic the Hedgehog 2"],
            // sonic boom
            // mushroom hill
            ["Doomsday Zone", "doomsday", "Sonic 3 & Knuckles"],
            // welcome to station square
            // emerald coast
            // casinopolis
            // red mountain - red hot skull
            // speed highway
            // tornado (plane) theme
            // sky deck
            ["Open Your Heart", "perfect_chaos", "Sonic Adventure"],
            ["Escape from the City", "escape", "Sonic Adventure 2"],
            // green forest
            // metal harbor
            // radical highway
            // pumpkin hill
            ["Supporting Me", "biolizard", "Sonic Adventure 2"],
            ["Live and Learn", "liveandlearn", "Sonic Adventure 2"],
            ["Sonic Heroes", "sonic_heroes", "Sonic Heroes"],
            ["Egg Emperor", "egg_emp", "Sonic Heroes"],
            ["What I\'m Made Of", "made_of", "Sonic Heroes"],
            ["I am... All of Me", "i_am", "Shadow the Hedgehog"],
            ["Final Haunt", "final_haunt", "Shadow the Hedgehog"],
            ["Chosen One", "chosen_one", "Shadow the Hedgehog"],
            ["Never Turn Back", "never_turn", "Shadow the Hedgehog"],
            // wave ocean waters edge
            // white acropolis snowy peak
            ["Crisis City - The Flame", "crisis", "Sonic the Hedgehog (2006)"],
            ["Solaris Phase 2", "solaris", "Sonic the Hedgehog (2006)"],
            ["Rooftop Run", "rooftop", "Sonic Unleashed"],
            ["Perfect Dark Gaia Phase 2", "dark_gaia", "Sonic Unleashed"],
            ["Knight of the Wind", "wind", "Sonic and the Black Knight"],
            // sonic colors planet wisp
            // aquarium park
            // sonic colors terminal velocity
            // sonic colors final boss
            // crisis city classic
            ["Studiopolis Act Zone 1", "studiopolis", "Sonic Mania"],
            ["Titanic Monarch Zone Act 2", "titanic_monarch", "Sonic Mania"],
            ["Fist Bump", "fist_bump", "Sonic Forces"],
            ["Avatar Menu", "avatar_menu", "Sonic Forces"],
            ["Battle with Metal Sonic", "metal_sonic", "Sonic Forces"],
            ["Infinite", "infinite", "Sonic Forces"],
            ["Concept of Love", "concept", "Jet Set Radio Future"],
            ["Let\'s Dance, Boys!", "bayonetta", "Bayonetta"],
            ["Tomorrow is Mine", "tomorrow_mine", "Bayonetta 2"],
            ["Battle for Everyone\'s Souls", "persona3", "Persona 3"],
            // metal gear
            ["Song of the Ancients - Fate", "song_ancients", "NieR"],
            ["Birth of a Wish", "birth_wish", "NieR: Automata"],
            ["City Ruins (Rays of Light)", "city_ruins_nier", "NieR: Automata"],
            ["Amusement Park", "amusement", "NieR: Automata"],
            ["A Beautiful Song", "opera_nier", "NieR: Automata"],
            ["Copied City", "copied_city", "NieR: Automata"],
            ["The Weight of the World", "weight_of_the_world", "NieR: Automata"],
            ["Calling", "calling", "The World Ends With You"],
            ["Long Dream", "long_dream", "The World Ends With You"],
            ["Three Minutes Clapping", "three_minutes_clapping", "The World Ends With You"],
            ["Detonation", "detonation", "The World Ends With You"],
            ["Game Over", "game_over", "The World Ends With You"],
            ["Emptiness and", "emptiness_and", "The World Ends With You"],
            ["Lullaby for You", "lullaby_for_you", "The World Ends With You"],
            ["Simple and Clean", "simple", "Kingdom Hearts"],
            ["Hikari Orchestra", "kh1_open", "Kingdom Hearts"],
            ["Night of Fate", "night_fate", "Kingdom Hearts"],
            ["Traverse Town", "traverse", "Kingdom Hearts"],
            ["Guardando nel Buio", "ansem", "Kingdom Hearts"],
            ["Naminé", "namine", "Kingdom Hearts Re:Chain of Memories"],
            ["Hollow Bastion", "rcom_hollow_bastion", "Kingdom Hearts Re:Chain of Memories"],
            ["Lord of the Castle", "lord_of_castle", "Kingdom Hearts Re:Chain of Memories"],
            ["Dearly Beloved (KH2 Ver.)", "dearly_beloved2", "Kingdom Hearts 2"],
            ["Sanctuary", "sanctuary", "Kingdom Hearts 2"],
            ["Passion Orchestra",  "kh2_open", "Kingdom Hearts 2"],
            ["Roxas\'s Theme", "roxas", "Kingdom Hearts 2"],
            ["The 13th Struggle", "struggle", "Kingdom Hearts 2"],
            ["Sacred Moon", "sacred_moon", "Kingdom Hearts 2"],
            ["Fate of the Unknown", "fate_unknown", "Kingdom Hearts 2"],
            ["Xion\'s Theme", "xion", "Kingdom Hearts 358/2 Days"],
            ["Vector to the Heavens", "vector", "Kingdom Hearts 358/2 Days"],
            ["Riku Battle", "riku", "Kingdom Hearts 358/2 Days"],
            ["Dearly Beloved (BBS Ver.)", "dearly_beloved", "Kingdom Hearts Birth by Sleep"],
            ["Aqua\'s Theme", "aqua", "Kingdom Hearts Birth by Sleep"],
            ["Ventus", "ventus_bbs", "Kingdom Hearts Birth by Sleep"],
            ["Dismiss", "dismiss_kh", "Kingdom Hearts Birth by Sleep"],
            ["L\'Impeto Oscuro", "young_x", "Kingdom Hearts Dream Drop Distance"],
            ["Ray of Hope Mix", "rayofhope", "Kingdom Hearts 0.2"],
            ["The Secret Whispers", "secret_whispers", "Kingdom Hearts 0.2"],
            ["Wave of Darkness 1", "dark_wave_kh", "Kingdom Hearts 0.2"],
            ["Dearly Beloved (KHUX Ver.)", "khux", "Kingdom Hearts Union X"],
            ["Opening", "ff7opening", "Final Fantasy VII"],
            ["Aerith\'s Theme", "aerith", "Final Fantasy VII"],
            ["One Winged Angel", "onewinged", "Final Fantasy VII"],
            ["Battle Theme", "battle_ffx", "Final Fantasy X"],
            ["Otherworld", "otherworld_ffx", "Final Fantasy X"],
            ["Blinded by Light", "blinded_light", "Final Fantasy XIII"],
            ["Apocalypsis Aquarius", "aquarius", "Final Fantasy XV"],
            ["Hammerhead - The Last Bastion", "last_bastion", "Final Fantasy XV"],
            ["Somnus", "somnus", "Final Fantasy XV"],
            ["Massive Explosion", "dissidia", "DISSIDIA FINAL FANTASY -Arcade-"],
            ["Main Theme (Skyrim)", "skyrim", "Elder Scrolls V: Skyrim"],
            // Call of Duty anything
            ["Main Theme (Halo)", "halo", "Halo"],
            ["Follow in Flight", "flight", "Halo 2: Anniversary Edition"],
            ["Breaking the Covenant", "covenant", "Halo 2: Anniversary Edition"],
            ["Mad World (Instrumental)", "madworld", "Gears of War 3"],
            ["E1M1 - At Doom\'s Gate", "doom_theme", "DOOM"],
            ["Jingle Jangle Jingle", "jingle", "Fallout New Vegas"],
            ["Butcher Pete", "butcher_pete", "Fallout 3"],
            ["UN Owen Was Her?", "un_owen", "Touhou"],
            ["Necrofantasia", "necrof", "Touhou"],
            ["Dr. Zomboss", "pvz", "Plants vs Zombies"],
            ["Zombies on your Lawn", "zombie_lawn", "Plants vs Zombies"],
            ["Still Alive", "still_alive", "Portal"],
            ["Haggstrom", "haggstrom", "Minecraft"],
            ["Your Best Friend", "best_friend", "Undertale"],
            ["Undertale", "undertale", "Undertale"],
            ["Heartache", "heartache", "Undertale"],
            ["sans.", "sans", "Undertale"],
            ["Snowdin Town", "snowdin", "Undertale"],
            ["Bonetrousle", "bonetrousle", "Undertale"],
            ["Waterfall", "waterfall", "Undertale"],
            ["Temmie Village", "tem", "Undertale"],
            ["Spear of Justice", "spear_justice", "Undertale"],
            ["Alphys", "alphys", "Undertale"],
            ["Another Medium", "medium", "Undertale"],
            ["Spider Dance", "spider_dance", "Undertale"],
            ["The Core", "core", "Undertale"],
            ["Metal Crusher", "m_crusher", "Undertale"],
            ["Death by Glamour", "death_by_glamour", "Undertale"],
            ["Bergentrückung / ASGORE", "asgore", "Undertale"],
            ["Finale", "ut_finale", "Undertale"],
            ["Amalgam", "amalgam", "Undertale"],
            ["Hopes and Dreams", "hopes_and_dreams", "Undertale"],
            ["SAVE the World", "save_world", "Undertale"],
            ["His Theme", "his_theme", "Undertale"],
            ["Battle Against a True Hero", "battle_against", "Undertale"],
            ["Megalovania", "megalovania", "Undertale"],
            // minit
            ["Your Contract Has Expired", "contract", "A Hat in Time"],
            ["Strike the Earth!", "strike_earth", "Shovel Knight"],
            ["Positive Force", "vvvvvv", "VVVVVV"],
            ["Hot Damned", "meatboy", "Super Meat Boy"],
            ["Last Battle", "cave_story", "Cave Story"],
            ["Mausoleum Mash (Shopkeeper)", "crypt", "Crypt of the NecroDancer"],
            ["Hexagon", "hexagon", "Super Hexagon"],
            ["Tower of Heaven", "tower_heaven", "Super Smash Land"],
            ["The End", "the_end", "Drawn to Life"],
            ["Real Life", "real_life", "Drawn to Life: The Next Chapter"],
            ["The Moon", "ducktales_moon", "DuckTales"],
            ["Main Theme (Batman: Arkham City)", "batman", "Batman: Arkham City"],
            ["Opening", "budokai", "Dragon Ball Z: Budokai 3"],
            ["Super Survivor (Instrumental)", "super_survivor", "Dragon Ball Z: Budokai Tenkaichi 3"],
            ["Future Trunks\'s Theme", "dbfztrunks", "Dragon Ball FighterZ"],
            ["Nappa\'s Theme", "nappa", "Dragon Ball FighterZ"],
            ["Frieza\'s Theme", "frieza", "Dragon Ball FighterZ"],
            ["Hit\'s Theme", "dbfzhit", "Dragon Ball FighterZ"]]
// 232 songs
// Clean up and make into objects and keys

var song_searchbar = {
    searchitem: null,
    val_func: function() {
        searchitem = $('#songsearch').val();
        return searchitem;
    },
}

var current_item = 0;
var placehold = null;
var songnames = songlist.map(songinfo => songinfo[0]);

// changing track
function change_track(song_info) {
    $("#title").text(song_info[2]);
    $("#music").text(song_info[0]);
    current_item = songlist.indexOf(song_info);
    if (audio.duration === 0 || audio.paused) {
        $("#songsource").attr("src", "song/" + song_info[1] + ".mp3");
        audio.load();
    };
    pauseplay();
    return false;
};

// background change track (if youre in a different location and loop ends for one song to switch)

// changing pause to play
function pauseplay() {
  if (audio.duration > 0 && current_item === placehold && !audio.paused) {
    $('#pause').css('display', 'inline-block');
    $('#play').css('display', 'none');
  }
  else {
    $('#pause').css('display', 'none');
    $('#play').css('display', 'inline-block');
  };
};

function findsearch(n, array) {
    var indexofsearch;
    var indexofsearcharray = array.findIndex(function(sub) {
        indexofsearch = sub.indexOf(n);
        return indexofsearch !== -1;
    });
    if (indexofsearcharray === -1) {
        return 0;
    }
    return indexofsearcharray;
};

// moving right
$("#buttonright").on("click", function() {
    current_item = (current_item + 1) % songlist.length;
    change_track(songlist[current_item]);
    pauseplay();
});

// moving right between games
$("#buttonright2").on("click", function() {
    game = songlist[current_item][2];
    current_item = (current_item + 1) % songlist.length;
    while (songlist[current_item][2] === game) {
      current_item = (current_item + 1) % songlist.length;
    };
    change_track(songlist[current_item]);
    pauseplay();
});

// moving left
$("#buttonleft").on("click", function() {
    current_item = (current_item - 1);
    if (current_item < 0) {current_item = songlist.length - 1;};
    change_track(songlist[current_item]);
    pauseplay();        
});

// moving left between games
$("#buttonleft2").on("click", function() {
    game = songlist[current_item][2];
    current_item = (current_item - 1);
    if (current_item < 0) {current_item = songlist.length - 1;};
    while (songlist[current_item][2] === game) {
      current_item = (current_item - 1);
      if (current_item < 0) {current_item = songlist.length - 1;};
    };
    change_track(songlist[current_item]);
    pauseplay();        
});

// playing
$("#play").on("click", function() {
    if (audio.duration > 0 && !audio.paused) {
      audio.pause();
      $("#songsource").attr("src", "song/" + songlist[current_item][1] + ".mp3");
      audio.load();
    }
    placehold = current_item;
    audio.play();
    pauseplay();        
});

// pausing
$("#pause").on("click", function() {
    audio.pause();
    pauseplay();        
});

// loop switch
$('#loop_switch').on("click", function() {
  if (audio.loop === true) {
    audio.loop = false;
    $('#loop_switch').text("Loop Song: Off");
  }
  else if (audio.loop === false) {
    audio.loop = true;
    $('#loop_switch').text("Loop Song: On");
  }
});

// if loop is off and audio just ended
$('audio').on("ended", function() {
  if (audio.loop === false) {
    audio.duration = 0;
    placehold = (placehold + 1) % songlist.length;
    change_track(songlist[placehold]);
    audio.play();
    pauseplay();
  };
});

// should change big play to pause if second play was pressed
$('audio').on("play", function() {
  // if another song isn't already playing and was paused using second pause while on another song
  placehold = current_item;
  pauseplay();
});

// if loop is on and you're on the audio that is playing
$('audio').on("playing", function() {
  pauseplay();
});

// clicking second pause button should change first pause to play
$('audio').on("pause", function() {
  pauseplay();
});

// searchbar submit
$("#songsearch_form").submit(function () { return change_track(songlist[findsearch(song_searchbar.val_func(), songlist)]); });
// autocomplete
$("#songsearch").autocomplete({ source: songnames });

// clicking second play on a different song while other song is currently playing shouldn't change button
// change cursor to hand on suggestion hover. suggestion should be highlighted
